.. _troubleshooting:

*********************************
B. Решение проблем и рекомендации
*********************************

B.1 Нестабильный битрейт и ошибки CC Error
==========================================

Что делать, если битрейт потоков на выходе сильно отличается от битрейта на входе,
или возникают ошибки CC Error на нестабильных потоках?

Включите режим ``ts-processing-enabled``, а также повысьте приоритет процесса microporter через изменение опции
``priority`` в файле конфигурации. Изменение приоритета следует начинать с 1 и затем проверять результат.

Также ошибки CC Error и нестабильный битрейт потока может быть следствием слишком большой задержки чтения пакетов -
опция ``read-cycle-delay``. Не рекомендуется использовать значения более 500 нсек.

Также причиной нестабильности потоков может быть общая перегружнность сервера, недостаточная пропускная способность
линии связи, слишком большой уровень потерь пакетов и джиттера, или некачественные аппаратные компоненты сервера.
см. :ref:`Системные требования <system-requirements>`

B.2 Рекомендуемые параметры ядра
================================

Изменения нужно вносить в файл /etc/sysctl.conf:
::
    kernel.shmmax = 2473822720
    kernel.shmall = 4097152000
    net.core.rmem_default = 262144
    net.core.rmem_max = 8388608
    net.core.wmem_default = 262144
    net.core.wmem_max = 8388608

Затем выполнить команду для применения изменений:
::
    sysctl -p

